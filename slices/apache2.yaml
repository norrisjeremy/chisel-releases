package: apache2

essential:
  - apache2_copyright

slices:
  bins:
    essential:
      - apache2-bin_bins
      - apache2-utils_bins
      - apache2_config
      - base-files_bin
      - base-files_var
      - coreutils_bins
      - dash_bins
      - findutils_bins
      - media-types_data
      - perl-base_bins
      - perl-base_modules
      - perl-modules-5.38_core
      - perl-modules-5.38_system-utils
      - procps_bins
    contents:
      /usr/sbin/a2disconf:
      /usr/sbin/a2dismod:
      /usr/sbin/a2dissite:
      /usr/sbin/a2enconf:
      /usr/sbin/a2enmod:
      /usr/sbin/a2ensite:
      /usr/sbin/a2query:
      /usr/sbin/apache2ctl:
      /usr/sbin/apachectl:

  config:
    essential:
      - apache2-data_data
      - apache2_documentroot
    contents:
      /etc/apache2/apache2.conf:
      /etc/apache2/conf-available/**:
      /etc/apache2/conf-enabled/charset.conf:
        symlink: /etc/apache2/conf-available/charset.conf
      /etc/apache2/conf-enabled/localized-error-pages.conf:
        symlink: /etc/apache2/conf-available/localized-error-pages.conf
      /etc/apache2/conf-enabled/other-vhosts-access-log.conf:
        symlink: /etc/apache2/conf-available/other-vhosts-access-log.conf
      /etc/apache2/conf-enabled/security.conf:
        symlink: /etc/apache2/conf-available/security.conf
      /etc/apache2/conf-enabled/serve-cgi-bin.conf:
        symlink: /etc/apache2/conf-available/serve-cgi-bin.conf
      /etc/apache2/envvars:
      /etc/apache2/magic:
      /etc/apache2/mods-available/access_compat.load:
      /etc/apache2/mods-available/actions.conf:
      /etc/apache2/mods-available/actions.load:
      /etc/apache2/mods-available/alias.conf:
      /etc/apache2/mods-available/alias.load:
      /etc/apache2/mods-available/allowmethods.load:
      /etc/apache2/mods-available/asis.load:
      /etc/apache2/mods-available/auth_basic.load:
      /etc/apache2/mods-available/auth_digest.load:
      /etc/apache2/mods-available/auth_form.load:
      /etc/apache2/mods-available/authn_anon.load:
      /etc/apache2/mods-available/authn_core.load:
      /etc/apache2/mods-available/authn_dbd.load:
      /etc/apache2/mods-available/authn_dbm.load:
      /etc/apache2/mods-available/authn_file.load:
      /etc/apache2/mods-available/authn_socache.load:
      /etc/apache2/mods-available/authnz_fcgi.load:
      /etc/apache2/mods-available/authnz_ldap.load:
      /etc/apache2/mods-available/authz_core.load:
      /etc/apache2/mods-available/authz_dbd.load:
      /etc/apache2/mods-available/authz_dbm.load:
      /etc/apache2/mods-available/authz_groupfile.load:
      /etc/apache2/mods-available/authz_host.load:
      /etc/apache2/mods-available/authz_owner.load:
      /etc/apache2/mods-available/authz_user.load:
      /etc/apache2/mods-available/autoindex.conf:
      /etc/apache2/mods-available/autoindex.load:
      /etc/apache2/mods-available/brotli.load:
      /etc/apache2/mods-available/buffer.load:
      /etc/apache2/mods-available/cache.load:
      /etc/apache2/mods-available/cache_disk.conf:
      /etc/apache2/mods-available/cache_disk.load:
      /etc/apache2/mods-available/cache_socache.load:
      /etc/apache2/mods-available/cern_meta.load:
      /etc/apache2/mods-available/cgi.load:
      /etc/apache2/mods-available/cgid.conf:
      /etc/apache2/mods-available/cgid.load:
      /etc/apache2/mods-available/charset_lite.load:
      /etc/apache2/mods-available/data.load:
      /etc/apache2/mods-available/dav.load:
      /etc/apache2/mods-available/dav_fs.conf:
      /etc/apache2/mods-available/dav_fs.load:
      /etc/apache2/mods-available/dav_lock.load:
      /etc/apache2/mods-available/dbd.load:
      /etc/apache2/mods-available/deflate.conf:
      /etc/apache2/mods-available/deflate.load:
      /etc/apache2/mods-available/dialup.load:
      /etc/apache2/mods-available/dir.conf:
      /etc/apache2/mods-available/dir.load:
      /etc/apache2/mods-available/dump_io.load:
      /etc/apache2/mods-available/echo.load:
      /etc/apache2/mods-available/env.load:
      /etc/apache2/mods-available/expires.load:
      /etc/apache2/mods-available/ext_filter.load:
      /etc/apache2/mods-available/file_cache.load:
      /etc/apache2/mods-available/filter.load:
      /etc/apache2/mods-available/headers.load:
      /etc/apache2/mods-available/heartbeat.load:
      /etc/apache2/mods-available/heartmonitor.load:
      /etc/apache2/mods-available/http2.conf:
      /etc/apache2/mods-available/http2.load:
      /etc/apache2/mods-available/ident.load:
      /etc/apache2/mods-available/imagemap.load:
      /etc/apache2/mods-available/include.load:
      /etc/apache2/mods-available/info.conf:
      /etc/apache2/mods-available/info.load:
      /etc/apache2/mods-available/lbmethod_bybusyness.load:
      /etc/apache2/mods-available/lbmethod_byrequests.load:
      /etc/apache2/mods-available/lbmethod_bytraffic.load:
      /etc/apache2/mods-available/lbmethod_heartbeat.load:
      /etc/apache2/mods-available/ldap.conf:
      /etc/apache2/mods-available/ldap.load:
      /etc/apache2/mods-available/log_debug.load:
      /etc/apache2/mods-available/log_forensic.load:
      /etc/apache2/mods-available/lua.load:
      /etc/apache2/mods-available/macro.load:
      /etc/apache2/mods-available/md.load:
      /etc/apache2/mods-available/mime.conf:
      /etc/apache2/mods-available/mime.load:
      /etc/apache2/mods-available/mime_magic.conf:
      /etc/apache2/mods-available/mime_magic.load:
      /etc/apache2/mods-available/mpm_event.conf:
      /etc/apache2/mods-available/mpm_event.load:
      /etc/apache2/mods-available/mpm_prefork.conf:
      /etc/apache2/mods-available/mpm_prefork.load:
      /etc/apache2/mods-available/mpm_worker.conf:
      /etc/apache2/mods-available/mpm_worker.load:
      /etc/apache2/mods-available/negotiation.conf:
      /etc/apache2/mods-available/negotiation.load:
      /etc/apache2/mods-available/proxy.conf:
      /etc/apache2/mods-available/proxy.load:
      /etc/apache2/mods-available/proxy_ajp.load:
      /etc/apache2/mods-available/proxy_balancer.conf:
      /etc/apache2/mods-available/proxy_balancer.load:
      /etc/apache2/mods-available/proxy_connect.load:
      /etc/apache2/mods-available/proxy_express.load:
      /etc/apache2/mods-available/proxy_fcgi.load:
      /etc/apache2/mods-available/proxy_fdpass.load:
      /etc/apache2/mods-available/proxy_ftp.conf:
      /etc/apache2/mods-available/proxy_ftp.load:
      /etc/apache2/mods-available/proxy_hcheck.load:
      /etc/apache2/mods-available/proxy_html.conf:
      /etc/apache2/mods-available/proxy_html.load:
      /etc/apache2/mods-available/proxy_http.load:
      /etc/apache2/mods-available/proxy_http2.load:
      /etc/apache2/mods-available/proxy_scgi.load:
      /etc/apache2/mods-available/proxy_uwsgi.load:
      /etc/apache2/mods-available/proxy_wstunnel.load:
      /etc/apache2/mods-available/ratelimit.load:
      /etc/apache2/mods-available/reflector.load:
      /etc/apache2/mods-available/remoteip.load:
      /etc/apache2/mods-available/reqtimeout.conf:
      /etc/apache2/mods-available/reqtimeout.load:
      /etc/apache2/mods-available/request.load:
      /etc/apache2/mods-available/rewrite.load:
      /etc/apache2/mods-available/sed.load:
      /etc/apache2/mods-available/session.load:
      /etc/apache2/mods-available/session_cookie.load:
      /etc/apache2/mods-available/session_crypto.load:
      /etc/apache2/mods-available/session_dbd.load:
      /etc/apache2/mods-available/setenvif.conf:
      /etc/apache2/mods-available/setenvif.load:
      /etc/apache2/mods-available/slotmem_plain.load:
      /etc/apache2/mods-available/slotmem_shm.load:
      /etc/apache2/mods-available/socache_dbm.load:
      /etc/apache2/mods-available/socache_memcache.load:
      /etc/apache2/mods-available/socache_redis.load:
      /etc/apache2/mods-available/socache_shmcb.load:
      /etc/apache2/mods-available/speling.load:
      /etc/apache2/mods-available/ssl.conf:
      /etc/apache2/mods-available/ssl.load:
      /etc/apache2/mods-available/status.conf:
      /etc/apache2/mods-available/status.load:
      /etc/apache2/mods-available/substitute.load:
      /etc/apache2/mods-available/suexec.load:
      /etc/apache2/mods-available/unique_id.load:
      /etc/apache2/mods-available/userdir.conf:
      /etc/apache2/mods-available/userdir.load:
      /etc/apache2/mods-available/usertrack.load:
      /etc/apache2/mods-available/vhost_alias.load:
      /etc/apache2/mods-available/xml2enc.load:
      /etc/apache2/mods-enabled/access_compat.load:
        symlink: /etc/apache2/mods-available/access_compat.load
      /etc/apache2/mods-enabled/alias.conf:
        symlink: /etc/apache2/mods-available/alias.conf
      /etc/apache2/mods-enabled/alias.load:
        symlink: /etc/apache2/mods-available/alias.load
      /etc/apache2/mods-enabled/auth_basic.load:
        symlink: /etc/apache2/mods-available/auth_basic.load
      /etc/apache2/mods-enabled/authn_file.load:
        symlink: /etc/apache2/mods-available/authn_file.load
      /etc/apache2/mods-enabled/authz_core.load:
        symlink: /etc/apache2/mods-available/authz_core.load
      /etc/apache2/mods-enabled/authz_host.load:
        symlink: /etc/apache2/mods-available/authz_host.load
      /etc/apache2/mods-enabled/authz_user.load:
        symlink: /etc/apache2/mods-available/authz_user.load
      /etc/apache2/mods-enabled/autoindex.conf:
        symlink: /etc/apache2/mods-available/autoindex.conf
      /etc/apache2/mods-enabled/autoindex.load:
        symlink: /etc/apache2/mods-available/autoindex.load
      /etc/apache2/mods-enabled/deflate.conf:
        symlink: /etc/apache2/mods-available/deflate.conf
      /etc/apache2/mods-enabled/deflate.load:
        symlink: /etc/apache2/mods-available/deflate.load
      /etc/apache2/mods-enabled/dir.conf:
        symlink: /etc/apache2/mods-available/dir.conf
      /etc/apache2/mods-enabled/dir.load:
        symlink: /etc/apache2/mods-available/dir.load
      /etc/apache2/mods-enabled/env.load:
        symlink: /etc/apache2/mods-available/env.load
      /etc/apache2/mods-enabled/filter.load:
        symlink: /etc/apache2/mods-available/filter.load
      /etc/apache2/mods-enabled/mime.conf:
        symlink: /etc/apache2/mods-available/mime.conf
      /etc/apache2/mods-enabled/mime.load:
        symlink: /etc/apache2/mods-available/mime.load
      /etc/apache2/mods-enabled/mpm_event.conf:
        symlink: /etc/apache2/mods-available/mpm_event.conf
      /etc/apache2/mods-enabled/mpm_event.load:
        symlink: /etc/apache2/mods-available/mpm_event.load
      /etc/apache2/mods-enabled/negotiation.conf:
        symlink: /etc/apache2/mods-available/negotiation.conf
      /etc/apache2/mods-enabled/negotiation.load:
        symlink: /etc/apache2/mods-available/negotiation.load
      /etc/apache2/mods-enabled/reqtimeout.conf:
        symlink: /etc/apache2/mods-available/reqtimeout.conf
      /etc/apache2/mods-enabled/reqtimeout.load:
        symlink: /etc/apache2/mods-available/reqtimeout.load
      /etc/apache2/mods-enabled/setenvif.conf:
        symlink: /etc/apache2/mods-available/setenvif.conf
      /etc/apache2/mods-enabled/setenvif.load:
        symlink: /etc/apache2/mods-available/setenvif.load
      /etc/apache2/mods-enabled/status.conf:
        symlink: /etc/apache2/mods-available/status.conf
      /etc/apache2/mods-enabled/status.load:
        symlink: /etc/apache2/mods-available/status.load
      /etc/apache2/ports.conf:
      /etc/apache2/sites-available/**:
      /etc/apache2/sites-enabled/000-default.conf:
        symlink: /etc/apache2/sites-available/000-default.conf
      /usr/share/apache2/ask-for-passphrase:
      /var/cache/apache2/mod_cache_disk/:
      /var/lib/apache2/conf/: {make: true, mode: 0755}
      /var/lib/apache2/conf/enabled_by_maint/: {make: true, mode: 0755}
      /var/lib/apache2/conf/enabled_by_maint/charset: {text: "", mode: 0644}
      /var/lib/apache2/conf/enabled_by_maint/localized-error-pages: {text: "", mode: 0644}
      /var/lib/apache2/conf/enabled_by_maint/other-vhosts-access-log: {text: "", mode: 0644}
      /var/lib/apache2/conf/enabled_by_maint/security: {text: "", mode: 0644}
      /var/lib/apache2/conf/enabled_by_maint/serve-cgi-bin: {text: "", mode: 0644}
      /var/lib/apache2/module/: {make: true, mode: 0755}
      /var/lib/apache2/module/enabled_by_maint/: {make: true, mode: 0755}
      /var/lib/apache2/module/enabled_by_maint/access_compat: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/alias: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/auth_basic: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/authn_core: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/authn_file: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/authz_core: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/authz_host: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/authz_user: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/autoindex: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/deflate: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/dir: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/env: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/filter: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/mime: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/mpm_event: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/negotiation: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/reqtimeout: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/setenvif: {text: "", mode: 0644}
      /var/lib/apache2/module/enabled_by_maint/status: {text: "", mode: 0644}
      /var/lib/apache2/site/: {make: true, mode: 0755}
      /var/lib/apache2/site/enabled_by_maint/: {make: true, mode: 0755}
      /var/lib/apache2/site/enabled_by_maint/000-default: {text: "", mode: 0644}
      /var/log/apache2/:
      /var/log/apache2/access.log: {text: "", mode: 0640}
      /var/log/apache2/error.log: {text: "", mode: 0640}
      /var/log/apache2/other_vhosts_access.log: {text: "", mode: 0640}

  copyright:
    contents:
      /usr/share/doc/apache2/copyright:

  index:
    essential:
      - apache2-data_default-site
      - apache2_documentroot
    contents:
      /var/www/html/index.html: {text: FIXME, mutable: true, mode: 0644}
    mutate: |
      index = content.read("/usr/share/apache2/default-site/index.html")
      content.write("/var/www/html/index.html", index)

  documentroot:
    contents:
      /var/www/html/: {make: true, mode: 0755}
